#include <iostream>
#include <Windows.h>
#include <vector>
#include <cmath>

using namespace std;

int main()
{
    SetConsoleCP(1251);
	SetConsoleOutputCP(1251);

    //setlocale(0, "");

    cout << "Введите максимальную степень уравнения: ";
    int maxEq;
    cin >> maxEq;

    vector <int> v(maxEq + 1);

    cout << "Введите a, b, c и т.д. этого уравнения: ";
    for(int i = 0; i < maxEq + 1; ++i)
        cin >> v[i];


    int lastEq = abs(v[maxEq]);

    vector <int> dels;
    cout << "Выпишем все делители: ";
    for(int i = 1; i <= lastEq; ++i){
        if(lastEq % i == 0){
            cout << "+-" << i << " ";
            dels.push_back(i);
            dels.push_back(-i);
        }
    }

    cout << endl;

    vector <int> usefulDels;

    for(int i = 0; i < dels.size(); ++i){

        int sm = 0;
        int Eq = maxEq;
        for(int j = 0; j < maxEq; ++j, --Eq){
            sm += v[j] * pow(i, Eq);
        }

        sm += v[maxEq];

        if(sm == 0){
            cout << "Делитель: " << i << " подошёл!" << endl;
            usefulDels.push_back(i);
        }
    }

    cout << endl;

    cout << "Теперь найдем коэффициенты." << endl;

    for(int i = 0; i < usefulDels.size(); ++i){
        cout << "Для делителя " << usefulDels[i];

        int curr = v[0] * usefulDels[i];
        int tmp = 0;
        cout << ") " << v[0] << " ";

        for(int j = 1; j < maxEq + 1; ++j){
            tmp = v[j] + curr;
            if(tmp == 0 && j == maxEq){
                break;
            }
            cout << tmp << " ";
            curr = tmp * usefulDels[i];
        }

        if(curr == 0){
            cout << "+";
        }

        cout << endl;
    }

    return 0;
}
